(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{377:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(19),s=a(11),o=a(14),i=a(8);var l=a(2),u=a.n(l),h=a(3),d=a(375);const m=h.c.div`
  height: 400px;
`,y=({payload:e,x:t,y:a})=>n.a.createElement("g",{transform:`translate(${t},${a})`},n.a.createElement("text",{x:60,y:0,dy:7,textAnchor:"end",transform:"rotate(35)",fontSize:10},e.value),";"),p=({dates:e})=>n.a.createElement(m,null,n.a.createElement(d.d,{width:"95%"},n.a.createElement(d.b,{data:e,margin:{left:-35,top:20,bottom:50,right:20}},n.a.createElement(d.a,{type:"monotone",dataKey:"mid",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.4}),n.a.createElement(d.f,{dataKey:"mid",type:"number",domain:[3,5],tick:{fontSize:10},allowDataOverflow:!0}),n.a.createElement(d.c,{stroke:"#eee"}),n.a.createElement(d.e,{interval:30,type:"category",dataKey:"effectiveDate",tick:n.a.createElement(y,null)}))));p.propTypes={dates:u.a.array};var f=p;var g=()=>n.a.createElement(c.a,{currency:"chart"},"There was an error loading data. Try to"," ",n.a.createElement("a",{style:{color:"#82ca9d",cursor:"pointer"},onClick:()=>window.location.reload()},"refresh this page"));function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends r.Component{constructor(...e){super(...e),E(this,"_isMounted",!1),E(this,"state",{dates:[],error:!1,currency:"usd"}),E(this,"componentDidMount",()=>{this._isMounted=!0,this.fetchRates()}),E(this,"componentDidUpdate",(e,t)=>{const{currency:a}=this.state;t.currency!==a&&this.fetchRates()}),E(this,"componentWillUnmount",()=>{this._isMounted=!1,clearTimeout(this.timeOut)}),E(this,"getCurrency",({currentTarget:e})=>{this.setState({currency:e.value})}),E(this,"timeOut",e=>{setTimeout(()=>e.abort(),1e4)}),E(this,"fetchRates",()=>{const{currency:e}=this.state,t=`https://cors-anywhere.herokuapp.com/http://api.nbp.pl/api/exchangerates/rates/a/${e}/${(e=>{const t=new Date,a=t.getDate();let r=t.setDate(a-e);return new Date(r).toISOString().slice(0,10)})(350)}/${(()=>{const e=new Date;return console.log(e.toISOString().slice(0,10)),e.toISOString().slice(0,10)})()}/`,a=new AbortController,r=a.signal;this._isMounted&&this.timeOut(a),fetch(t,{signal:r}).then(e=>e.json()).then(e=>{this._isMounted&&this.setState({dates:e.rates})}).catch(e=>this.setState({error:e}))})}render(){const{dates:e,error:t,currency:a}=this.state,r=["usd","eur"];return t?n.a.createElement(g,null):e.length?n.a.createElement(c.a,{currency:"chart"},n.a.createElement(i.b,null,"Currency Exchange Rates",n.a.createElement("br",null),"Chart"),n.a.createElement(i.a,null,n.a.createElement(o.a,{defaultValue:a,getCurrency:this.getCurrency,currencyArray:r}),"to PLN (last 360 days)"),n.a.createElement(f,{dates:e})):n.a.createElement(s.a,null)}}t.default=w}}]);